# Как посмотреть запись стрима с субтитрами?

Сначала я скачивал стримы прямо с Twitch на жёсткий диск с помощью streamlink (livestreamer), но потом нашёл более удобный способ, который позволяет не забивать место на жёстком диске. Зачем скачивать видео, если его можно смотреть прямо с видеохостинга? ![](https://static-cdn.jtvnw.net/emoticons/v1/180334/1.0)

## Подготовка (нужно выполнить всего один раз)

В зависимости от того, откуда вы собираетесь стримить, нам понадобятся следующие программы:

* Twitch: streamlink, mpv
* YouTube: youtube-dl, mpv

### Streamlink

Этот форк livestreamer позволяет смотреть видео с Twitch, YouTube и многих других сайтов без использования тяжёлых браузерных плееров. Нам он потребуется для стриминга видео с Twitch прямо в плеер mpv.

```bash
sudo apt-get install python-pip
sudo pip install streamlink
```

### YouTube-dl

На момент написания этой инструкции версия youtube-dl из репозиториев Ubuntu опять устарела и перестала работать, поэтому устанавливать его будем напрямую с официального сайта.

```bash
sudo wget https://yt-dl.org/downloads/latest/youtube-dl -O /usr/local/bin/youtube-dl
sudo chmod a+rx /usr/local/bin/youtube-dl
```

В дальнейшем, если он опять перестанет работать, можно просто выполнить команду `sudo youtube-dl -U`, чтобы обновить его до последней версии.

### MPV

Это лучший плеер из всех, что я видел! У него практически нет интерфейса, но он просто летает даже на Raspberry Pi. В качестве приятного бонуса он умеет сохранять последнюю позицию на видео, чтобы просмотр можно было продолжить ровно с того же места. Чтобы сохранить текущую позицию, нужно закрыть плеер сочетанием клавиш **Shift+Q**.

```bash
sudo apt-get install mpv
```

## Просмотр видео с субтитрами

* Стриминг с Twitch

```bash
streamlink -p "mpv --sub-file СУБТИТРЫ" --player-passthrough hls ССЫЛКА_НА_TWITCH best
```

Аргумент `--player-passthrough hls` тут нужен для того, чтобы видео можно было перематывать прямо в плеере.

* Стриминг с YouTube

```bash
mpv --sub-file СУБТИТРЫ ССЫЛКА_НА_YOUTUBE
```

Вариант с YouTube годаздо проще и зачастую предоставляет лучшее качество видео.
